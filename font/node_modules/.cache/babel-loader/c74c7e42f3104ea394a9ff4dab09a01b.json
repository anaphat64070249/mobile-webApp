{"remainingRequest":"C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\src\\views\\Home.vue","mtime":1682246777789},{"path":"C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682246830301},{"path":"C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1682246833604},{"path":"C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682246830301},{"path":"C:\\ปี 2เทอม 2\\web_pro\\work10\\WEEK12-TUTORIAL-EXERCISE-master Don\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1682246834747}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gIkAvcGx1Z2lucy9heGlvcyI7IC8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIb21lIiwKICBwcm9wczogWyJ1c2VyIl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaDogIiIsCiAgICAgIGJsb2dzOiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldEJsb2dzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRCbG9nczogZnVuY3Rpb24gZ2V0QmxvZ3MoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2gKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuYmxvZ3MgPSByZXNwb25zZS5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgaW1hZ2VQYXRoOiBmdW5jdGlvbiBpbWFnZVBhdGgoZmlsZV9wYXRoKSB7CiAgICAgIGlmIChmaWxlX3BhdGgpIHsKICAgICAgICByZXR1cm4gImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC8iICsgZmlsZV9wYXRoOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiaHR0cHM6Ly9idWxtYS5pby9pbWFnZXMvcGxhY2Vob2xkZXJzLzY0MHgzNjAucG5nIjsKICAgICAgfQogICAgfSwKICAgIHNob3J0Q29udGVudDogZnVuY3Rpb24gc2hvcnRDb250ZW50KGNvbnRlbnQpIHsKICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7CiAgICAgICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKDAsIDE5NykgKyAiLi4uIjsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbnRlbnQ7CiAgICB9LAogICAgYWRkTGlrZTogZnVuY3Rpb24gYWRkTGlrZShibG9nSWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBheGlvcy5wdXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9ibG9ncy9hZGRsaWtlLyIuY29uY2F0KGJsb2dJZCkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHNlbGVjdGVkQmxvZyA9IF90aGlzMi5ibG9ncy5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlLmlkID09PSBibG9nSWQ7CiAgICAgICAgfSlbMF07CgogICAgICAgIHNlbGVjdGVkQmxvZy5saWtlID0gcmVzcG9uc2UuZGF0YS5saWtlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgaXNCbG9nT3duZXI6IGZ1bmN0aW9uIGlzQmxvZ093bmVyKGJsb2cpIHsKICAgICAgaWYgKCF0aGlzLnVzZXIpIHJldHVybiBmYWxzZTsKCiAgICAgIGlmICh0aGlzLnVzZXIucm9sZSA9PT0gJ2FkbWluJykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gYmxvZy5jcmVhdGVfYnlfaWQgPT09IHRoaXMudXNlci5pZDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,OAAA,KAAA,MAAA,iBAAA,C,CACA;;AACA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,KAAA,EAAA,CAAA,MAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA;AAFA,KAAA;AAIA,GARA;AASA,EAAA,OATA,qBASA;AACA,SAAA,QAAA;AACA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,MAAA,KAAA,CACA,GADA,CACA,uBADA,EACA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA;AADA;AADA,OADA,EAMA,IANA,CAMA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA;AACA,OARA,EASA,KATA,CASA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OAXA;AAYA,KAdA;AAeA,IAAA,SAfA,qBAeA,SAfA,EAeA;AACA,UAAA,SAAA,EAAA;AACA,eAAA,2BAAA,SAAA;AACA,OAFA,MAEA;AACA,eAAA,kDAAA;AACA;AACA,KArBA;AAsBA,IAAA,YAtBA,wBAsBA,OAtBA,EAsBA;AACA,UAAA,OAAA,CAAA,MAAA,GAAA,GAAA,EAAA;AACA,eAAA,OAAA,CAAA,SAAA,CAAA,CAAA,EAAA,GAAA,IAAA,KAAA;AACA;;AACA,aAAA,OAAA;AACA,KA3BA;AA4BA,IAAA,OA5BA,mBA4BA,MA5BA,EA4BA;AAAA;;AACA,MAAA,KAAA,CACA,GADA,+CACA,MADA,GAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,YAAA,YAAA,GAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,EAAA,KAAA,MAAA;AAAA,SAAA,EAAA,CAAA,CAAA;;AACA,QAAA,YAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,OALA,EAMA,KANA,CAMA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OARA;AASA,KAtCA;AAuCA,IAAA,WAvCA,uBAuCA,IAvCA,EAuCA;AACA,UAAA,CAAA,KAAA,IAAA,EAAA,OAAA,KAAA;;AACA,UAAA,KAAA,IAAA,CAAA,IAAA,KAAA,OAAA,EAAA;AACA,eAAA,IAAA;AACA;;AACA,aAAA,IAAA,CAAA,YAAA,KAAA,KAAA,IAAA,CAAA,EAAA;AACA;AA7CA;AAZA,CAAA","sourcesContent":["<template>\n  <div class=\"container is-widescreen\">\n    <section class=\"hero\">\n      <div class=\"hero-body\">\n        <p class=\"title\">My Stories</p>\n        <div class=\"columns\">\n          <div class=\"column is-half\">\n            <input\n              class=\"input\"\n              type=\"text\"\n              v-model=\"search\"\n              placeholder=\"Search blog(s)\"\n            />\n          </div>\n          <div class=\"column is-half\">\n            <button @click=\"getBlogs\" class=\"button\">Search</button>\n          </div>\n        </div>\n      </div>\n    </section>\n    <section class=\"section\" id=\"app\">\n      <div class=\"content\">\n        <div class=\"columns is-multiline\">\n          <div class=\"column is-3\" v-for=\"blog in blogs\" :key=\"blog.id\">\n            <div class=\"card\">\n              <div class=\"card-image pt-5\">\n                <figure class=\"image\">\n                  <img\n                    style=\"height: 120px\"\n                    :src=\"imagePath(blog.file_path)\"\n                    alt=\"Placeholder image\"\n                  />\n                </figure>\n              </div>\n              <div class=\"card-content\">\n                <div class=\"title\">{{ blog.title }}</div>\n                <div class=\"content\" style=\"height: 200px\">\n                  {{ shortContent(blog.content) }}\n                </div>\n              </div>\n              <footer class=\"card-footer\">\n                <router-link\n                  class=\"card-footer-item\"\n                  :to=\"`/blogs/detail/${blog.id}`\"\n                  >Read more...</router-link\n                >\n                <a class=\"card-footer-item\" @click=\"addLike(blog.id)\">\n                  <span class=\"icon-text\">\n                    <span class=\"icon\">\n                      <i class=\"far fa-heart\"></i>\n                    </span>\n                    <span>Like ({{ blog.like }})</span>\n                  </span>\n                </a>\n                <a\n                  v-if=\"isBlogOwner(blog)\"\n                  class=\"card-footer-item\"\n                  @click=\"\n                    $router.push({\n                      name: 'update-blog',\n                      params: { id: blog.id },\n                    })\n                  \"\n                >\n                  <span class=\"icon-text\">\n                    <span>Edit</span>\n                  </span>\n                </a>\n              </footer>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport axios from \"@/plugins/axios\";\n// @ is an alias to /src\nexport default {\n  name: \"Home\",\n  props: [\"user\"],\n  data() {\n    return {\n      search: \"\",\n      blogs: [],\n    };\n  },\n  mounted() {\n    this.getBlogs();\n  },\n  methods: {\n    getBlogs() {\n      axios\n        .get(\"http://localhost:3000\", {\n          params: {\n            search: this.search,\n          },\n        })\n        .then((response) => {\n          this.blogs = response.data;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    imagePath(file_path) {\n      if (file_path) {\n        return \"http://localhost:3000/\" + file_path;\n      } else {\n        return \"https://bulma.io/images/placeholders/640x360.png\";\n      }\n    },\n    shortContent(content) {\n      if (content.length > 200) {\n        return content.substring(0, 197) + \"...\";\n      }\n      return content;\n    },\n    addLike(blogId) {\n      axios\n        .put(`http://localhost:3000/blogs/addlike/${blogId}`)\n        .then((response) => {\n          let selectedBlog = this.blogs.filter((e) => e.id === blogId)[0];\n          selectedBlog.like = response.data.like;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    isBlogOwner(blog) {\n      if (!this.user) return false;\n      if (this.user.role === 'admin'){\n        return true;\n      }\n      return blog.create_by_id === this.user.id;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/views"}]}